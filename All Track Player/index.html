<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choir Player</title>
    <style>
        /* Styling remains unchanged */
    </style>
</head>
<body>
    <div class="player-container">
        <button class="play-pause-button">Play</button>
        <div class="current-time">0:00</div>

        <!-- Soprano Track -->
        <div class="track">
            <span class="track-title">Soprano</span>
            <div class="waveform">
                <div class="progress"></div>
            </div>
            <div class="buttons">
                <button class="mute">Mute</button>
            </div>
            <input type="range" class="volume-slider" min="0" max="1" step="0.01">
            <audio class="audio" src="https://joselebe04.github.io/If-God-Is-For-Us/Website 2 Soprano/Soprano.mp3"></audio>
        </div>

        <!-- Alto Track -->
        <div class="track">
            <span class="track-title">Alto</span>
            <div class="waveform">
                <div class="progress"></div>
            </div>
            <div class="buttons">
                <button class="mute">Mute</button>
            </div>
            <input type="range" class="volume-slider" min="0" max="1" step="0.01">
            <audio class="audio" src="https://joselebe04.github.io/If-God-Is-For-Us/Website 3 Alto/Alto.mp3"></audio>
        </div>

        <!-- Tenor Track -->
        <div class="track">
            <span class="track-title">Tenor</span>
            <div class="waveform">
                <div class="progress"></div>
            </div>
            <div class="buttons">
                <button class="mute">Mute</button>
            </div>
            <input type="range" class="volume-slider" min="0" max="1" step="0.01">
            <audio class="audio" src="https://joselebe04.github.io/If-God-Is-For-Us/Website 4 Tenor/Tenor.mp3"></audio>
        </div>

        <!-- Bass Track -->
        <div class="track">
            <span class="track-title">Bass</span>
            <div class="waveform">
                <div class="progress"></div>
            </div>
            <div class="buttons">
                <button class="mute">Mute</button>
            </div>
            <input type="range" class="volume-slider" min="0" max="1" step="0.01">
            <audio class="audio" src="https://joselebe04.github.io/If-God-Is-For-Us/Website 5 Bass/Bass.mp3"></audio>
        </div>
    </div>

    <script>
        const playPauseButton = document.querySelector('.play-pause-button');
        const audioElements = document.querySelectorAll('.audio');
        const muteButtons = document.querySelectorAll('.mute');
        const currentTimeDisplay = document.querySelector('.current-time');
        const progressBars = document.querySelectorAll('.progress');
        const waveforms = document.querySelectorAll('.waveform');
        const volumeSliders = document.querySelectorAll('.volume-slider');

        let isPlaying = false;

        // Play/Pause functionality
        playPauseButton.addEventListener('click', () => {
            if (isPlaying) {
                audioElements.forEach(audio => audio.pause());
                playPauseButton.textContent = 'Play';
            } else {
                audioElements.forEach(audio => audio.play());
                playPauseButton.textContent = 'Pause';
            }
            isPlaying = !isPlaying;
        });

        // Mute/Unmute functionality
        muteButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                const slider = volumeSliders[index];
                if (slider.value > 0) {
                    slider.value = 0;
                    audioElements[index].volume = 0;
                    button.classList.add('active');
                } else {
                    slider.value = 1;
                    audioElements[index].volume = 1;
                    button.classList.remove('active');
                }
            });
        });

        // Volume Slider functionality
        volumeSliders.forEach((slider, index) => {
            slider.addEventListener('input', () => {
                const volume = slider.value;
                audioElements[index].volume = volume;
                if (volume > 0) {
                    muteButtons[index].classList.remove('active');
                } else {
                    muteButtons[index].classList.add('active');
                }
            });
        });

        // Sync all tracks to Soprano's time
        const syncToSoprano = () => {
            const sopranoTime = audioElements[0].currentTime;
            audioElements.forEach((audio, index) => {
                if (index !== 0 && Math.abs(audio.currentTime - sopranoTime) > 0.1) {
                    audio.currentTime = sopranoTime;
                }
            });
        };

        // Update time and progress bar as audio plays
        audioElements.forEach((audio, index) => {
            audio.addEventListener('timeupdate', () => {
                if (isPlaying) {
                    syncToSoprano(); // Keep syncing to Soprano while playing
                }

                const currentTime = Math.floor(audioElements[0].currentTime); // Sync display to Soprano
                const minutes = Math.floor(currentTime / 60);
                const seconds = currentTime % 60;
                currentTimeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                const progress = (audio.currentTime / audio.duration) * 100;
                progressBars[index].style.left = `${progress}%`;
            });
        });

        // Allow seeking by clicking the waveform
        waveforms.forEach((waveform, index) => {
            waveform.addEventListener('click', (e) => {
                const rect = waveform.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const clickPercentage = clickX / rect.width;

                const newTime = clickPercentage * audioElements[0].duration;

                // Sync all tracks to the new time
                audioElements.forEach(audio => {
                    audio.currentTime = newTime;
                });

                if (isPlaying) {
                    audioElements.forEach(audio => audio.play());
                }
            });
        });
    </script>
</body>
</html>
